<!DOCTYPE html>
<html>
<head>
    <title>VAPI Connection Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { padding: 10px 20px; font-size: 16px; margin: 10px; }
        #result { margin-top: 20px; padding: 10px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h1>VAPI Connection Test</h1>
    <p>This will test if VAPI can connect from your browser.</p>
    <button id="testBtn">Test VAPI Connection</button>
    <div id="result">Click the button to test...</div>

    <script type="module">
        // Import VAPI SDK from CDN
        import { Vapi } from 'https://unpkg.com/@vapi-ai/web@latest/dist/index.js';
        
        const testBtn = document.getElementById('testBtn');
        const result = document.getElementById('result');
        
        // Your actual credentials
        const token = 'b7928953-bf0e-4776-b7cf-8478aad5180e';
        const assistantId = 'a3f6b6bd-339f-4688-89a9-4b59cbca498a';
        
        testBtn.addEventListener('click', async () => {
            try {
                result.innerHTML = 'üîÑ Testing connection...';
                testBtn.disabled = true;
                
                const vapi = new Vapi(token);
                
                // Set up event listeners
                vapi.on('call-start', () => {
                    result.innerHTML = '‚úÖ Connection successful! Call started. Ending test call...';
                    setTimeout(() => vapi.stop(), 1000);
                });
                
                vapi.on('call-end', () => {
                    result.innerHTML = '‚úÖ Test completed successfully! VAPI is working properly.';
                    testBtn.disabled = false;
                });
                
                vapi.on('error', (error) => {
                    result.innerHTML = `‚ùå Error: ${error.errorMsg || error.message || 'Unknown error'}`;
                    console.error('VAPI Error:', error);
                    testBtn.disabled = false;
                });
                
                // Start the call
                await vapi.start(assistantId);
                
            } catch (error) {
                result.innerHTML = `‚ùå Failed to start: ${error.message}`;
                console.error('Error:', error);
                testBtn.disabled = false;
            }
        });
    </script>
</body>
</html>
